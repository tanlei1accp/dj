<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head lang="en">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>党建登录</title>
    <!-- 视图窗口，移动端特属的标签。 -->
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <!-- 是否启动webapp功能，会删除默认的苹果工具栏和菜单栏。 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- 这个主要是根据实际的页面设计的主体色为搭配来进行设置。 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- 忽略页面中的数字识别为电话号码,email识别 -->
    <meta name="format-detection" content="telephone=no, email=no">
    <!-- 启用360浏览器的极速模式(webkit) -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <!-- HTML5 Shim 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
    <!--[if lt IE 9]>
    <script src="partyMember/js/html5shiv.js"></script>
    <script src="partyMember/js/respond.min.js"></script>
    <![endif]-->
    <link rel="icon" href="http://ydj.hnpxw.org/front/view/front/20140504/login/rmydj/base/images/favicon.ico" mce_href="images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="partyMember/css/bootstrap.css">
    <link rel="stylesheet" href="partyMember/css/reset.css">
    <link rel="stylesheet" href="partyMember/css/login.css">

    <script src="partyMember/js/jquery-1.js"></script>
    <script src="partyMember/js/bootstrap.js"></script>
</head>
<body>

<div class="login-top clearfix">
    <h1 class="logo fl">
        <img src="../images/pc-logo.png" alt="">
    </h1>

    <div class="zeng fr">
        <img src="../images/pc-extra.png" alt="">
    </div>
</div>

<div class="all">
    <div class="container noPadding" style="position: relative;">
        <div class="login-w bgWhite">
            <div class="login-con">
                <form id="loginForm" action="http://learning-platform-cas.365yunxueyuan.com/cas/login" style="background-color: #ffffff">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="用户名" id="username" name="username">
                        <span class="input-group-addon username"></span>
                    </div>
                    <div class="input-group">
                        <input type="password" class="form-control" placeholder="密码" id="password" name="password">
                        <span class="input-group-addon password"></span>
                    </div>
                    <input type="hidden" name="auto" value="true">
                    <input type="hidden" name="service" value="http://ydj.hnpxw.org:80/front/">
                    <input type="hidden" name="loginat" value="http://ydj.hnpxw.org:80/front/view/front/20140504/login/rmydj/base/login.jsp">

                    <div class="special-input">

                        <div class="input-group">
                            <input type="text" style="margin-left:18px" class="input-val" placeholder="验证码" id="_inputCheckCode">
                        </div>
                        <div class="yzmImg" style="width:140px">
                            <canvas id="canvas" width="100" height="40" style="border-width:0px"></canvas>
                        </div>
                    </div>
                    <p class="colorRed fz12 text-center Loginerror" style="bottom: 120px;"></p>

                        <button type="button" class="btn" onclick="javascript:_submitForm();">登录</button><!-- class="btn btn-primary btn-lg btn-block colorWhite bg-white reset-btn"-->

                </form>

                <div style="margin-top:-25px;margin-left:20px;">
                    <a href="javascript:;">忘记密码？</a>
                </div>

            </div>
        </div>
    </div>

</div>

<div class="login-footer color3 text-center fz14" id="footId">
    Copyright© 2019 北京文华在线教育科技股份有限公司 版权所有 京ICP证120106号
</div>



    <!--/*function _submitForm()
    {
        // 用户名
        var username = document.getElementById("username").value;
        // 密码
        var password = document.getElementById("password").value;
        // 验证码
        var check = document.getElementById("_inputCheckCode").value;

        $('.Loginerror').html('').show();
        if(username == null ||username == '')
        {
            $('.Loginerror').html('请输入用户名').show();
            return false;
        };

        if(password==null ||password == '')
        {
            $('.Loginerror').html('请输入密码').show();
            return false;
        };

        //验证码不能为空
        if (check == null || check == "") {
        $('.Loginerror').html('请输入验证码').show();

        return false;
        }
        document.getElementById("loginForm").submit();
    }

    //判断浏览器是否支持 placeholder属性
    function isPlaceholder(){
        var input = document.createElement('input');
        return 'placeholder' in input;
    }

    if (!isPlaceholder()) {//不支持placeholder 用jquery来完成
        $(document).ready(function() {
            if(!isPlaceholder()){
                $("input").not("input[type='password']").each(//把input绑定事件 排除password框
                    function(){
                        if($(this).val()=="" && $(this).attr("placeholder")!=""){
                            $(this).val($(this).attr("placeholder"));
                            $(this).focus(function(){
                                if($(this).val()==$(this).attr("placeholder")) $(this).val("");
                            });
                            $(this).blur(function(){
                                if($(this).val()=="") $(this).val($(this).attr("placeholder"));
                            });
                        }
                    });
                //对password框的特殊处理1.创建一个text框 2获取焦点和失去焦点的时候切换
                var pwdField    = $("input[type=password]");
                var pwdVal = pwdField.attr('placeholder')== "密码"?$('#passwd').text(""):pwdField.attr('placeholder',"");
                pwdField.after('<input id="pwdPlaceholder" type="text" value='+pwdVal+' autocomplete="off" class="inp_login borderGreen"/>');
                var pwdPlaceholder = $('#pwdPlaceholder');
                pwdPlaceholder.show();
                pwdField.hide();

                pwdPlaceholder.focus(function(){
                    pwdPlaceholder.hide();
                    pwdField.show();
                    pwdField.focus();

                });

                pwdField.blur(function(){
                    if(pwdField.val() == '') {
                        pwdPlaceholder.show();
                        pwdField.hide();
                    }
                });

            }
        });

    }
*/-->
<script type="text/javascript" src="partyMember/js/jquery-3.3.1.min.js" ></script>
<script>
    $(function(){
        var show_num = [];
        draw(show_num);

        $("#canvas").on('click',function(){
            draw(show_num);
        })
        $(".btn").on('click',function(){
            // 用户名
            var username = document.getElementById("username").value;
            // 密码
            var password = document.getElementById("password").value;

            var val = $(".input-val").val().toLowerCase();

            var num = show_num.join("");

            $('.Loginerror').html('').show();
            if(username == null ||username == '')
            {
                $('.Loginerror').html('请输入用户名').show();
                return false;
            };

            if(password==null ||password == '')
            {
                $('.Loginerror').html('请输入密码').show();
                return false;
            };

            if(val==''){
                alert('请输入验证码！');
            }else if(val == num){
                alert('提交成功！');
                $(".input-val").val('');
                // draw(show_num);

            }else{
                alert('验证码错误！请重新输入！');
                $(".input-val").val('');
                // draw(show_num);
            }
            document.getElementById("loginForm").submit();
        })
    })

    //生成并渲染出验证码图形
    function draw(show_num) {
        var canvas_width=$('#canvas').width();
        var canvas_height=$('#canvas').height();
        var canvas = document.getElementById("canvas");//获取到canvas的对象，演员
        var context = canvas.getContext("2d");//获取到canvas画图的环境，演员表演的舞台
        canvas.width = canvas_width;
        canvas.height = canvas_height;
        var sCode = "a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0";
        var aCode = sCode.split(",");
        var aLength = aCode.length;//获取到数组的长度

        for (var i = 0; i < 4; i++) {  //这里的for循环可以控制验证码位数（如果想显示6位数，4改成6即可）
            var j = Math.floor(Math.random() * aLength);//获取到随机的索引值
            // var deg = Math.random() * 30 * Math.PI / 180;//产生0~30之间的随机弧度
            var deg = Math.random() - 0.5; //产生一个随机弧度
            var txt = aCode[j];//得到随机的一个内容
            show_num[i] = txt.toLowerCase();
            var x = 10 + i * 20;//文字在canvas上的x坐标
            var y = 20 + Math.random() * 8;//文字在canvas上的y坐标
            context.font = "bold 23px 微软雅黑";

            context.translate(x, y);
            context.rotate(deg);

            context.fillStyle = randomColor();
            context.fillText(txt, 0, 0);

            context.rotate(-deg);
            context.translate(-x, -y);
        }
        for (var i = 0; i <= 5; i++) { //验证码上显示线条
            context.strokeStyle = randomColor();
            context.beginPath();
            context.moveTo(Math.random() * canvas_width, Math.random() * canvas_height);
            context.lineTo(Math.random() * canvas_width, Math.random() * canvas_height);
            context.stroke();
        }
        for (var i = 0; i <= 30; i++) { //验证码上显示小点
            context.strokeStyle = randomColor();
            context.beginPath();
            var x = Math.random() * canvas_width;
            var y = Math.random() * canvas_height;
            context.moveTo(x, y);
            context.lineTo(x + 1, y + 1);
            context.stroke();
        }
    }

    //得到随机的颜色值
    function randomColor() {
        var r = Math.floor(Math.random() * 256);
        var g = Math.floor(Math.random() * 256);
        var b = Math.floor(Math.random() * 256);
        return "rgb(" + r + "," + g + "," + b + ")";
    }

</script>

</body></html>